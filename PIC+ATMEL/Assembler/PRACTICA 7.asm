;PRACTICA 7
; N = 6
	MOV	P1,#33H
	MOV	R3,#03H
	MOV	R0,#30H
	MOV	R7,#25H
	LCALL	LEER;
	MOV	R0,#36H
	MOV	R7,#25H
	MOV	R3,#03H
	LCALL	LEER;
	MOV	R7,#25H
CTRL:	JNB	P3.5,CTRL
	DJNZ	R7,CTRL
	MOV	A,P3
	ANL	A,#0FH
	MOV	R0,A
	CJNE	R0,#01H,CASE1
	LCALL 	CASO0
CASE1:	CJNE	R0,#02H,CASE2
	LCALL 	CASO1
CASE2:	CJNE	R0,#03H,CASE3
	LCALL	CASO2
CASE3:	CJNE	R0,#04H,FIN
	LCALL	CASO3
FIN:	SJMP	FIN;

LEER:	MOV	R7,#25H
CICLO:	JNB	P3.5,CICLO
	MOV	A,P3
	ANL	A,#0FH
	MOV	P1,A
	MOV	@R0,A
	INC	R0
	MOV	R7,#25H
CICLO0:	JB	P3.5,CICLO0
	MOV	A,P3
	ANL	A,#0FH
	MOV	P1,A
	MOV	@R0,A
	INC	R0
	DJNZ	R3,CICLO;
	RET;

CASO0: MOV	R0,#30H
	MOV	R1,#36H
	MOV	DPTR,#2012H
RESTA:	MOV	A,@R0
	SUBB	A,@R1
	MOV	R6,#20H
EXTERNA:MOVX	@DPTR,A
	DJNZ	R6,EXTERNA
	INC	R0
	INC	R1
	INC	DPTR
	CJNE	R0,#36H,RESTA
	LCALL	FI
HOLA:	MOV	P1,#01H
	LCALL 	RETARD
	MOV	P1,#00H
	LCALL 	RETARD
	SJMP 	HOLA

CASO1:	MOV	R0,#30H
	MOV	R1,#36H
	MOV	DPTR,#2018H
DIVIS:	MOV	A,@R0
	MOV	B,@R1
	DIV	AB
	MOV	R6,#20H
EXTERN:MOVX	@DPTR,A
	DJNZ	R6,EXTERN
	INC	R0
	INC	R1
	INC	DPTR
	CJNE	R0,#36H,DIVIS
	LCALL	FI
HOLA1:	MOV	P1,#02H
	LCALL 	RETARD
	MOV	P1,#00H
	LCALL 	RETARD
	SJMP 	HOLA1

CASO2:	MOV	R0,#35H
	MOV	DPTR,#2024H
IMPAR:	INC	R0
	MOV	B,#02H
	MOV	A,@R0
	DIV 	AB
	MOV	R1,B
	CJNE	R1,#01H,IMPAR
	MOV	A,@R0
	MOV	R7,#20H
ENVIO:	MOVX	@DPTR,A
	DJNZ	R7,ENVIO
	INC	DPTR
	CJNE	R0,#3CH,IMPAR
	LCALL	FI
HOLA2:	MOV	P1,#03H
	LCALL 	RETARD
	MOV	P1,#00H
	LCALL 	RETARD
	SJMP 	HOLA2

CASO3:	MOV	R0,#30H
	MOV	R1,#36H
	MOV	DPTR,#2030H
MAYOR:	MOV	A,@R0
	SUBB	A,@R1
	JC	BMAYORA
	MOV	R7,#20H
	MOV	A,@R1
MANDA:	MOVX	@DPTR,A
	DJNZ	R7,MANDA
	SJMP 	CIC
BMAYORA:MOV	R7,#20H
	MOV	A,@R0
MANDAS:	MOVX	@DPTR,A
	DJNZ	R7,MANDAS
CIC:	INC	R0
	INC	R1
	INC	DPTR
	CJNE	R0,#36H,MAYOR
	LCALL	FI
HOLA3:	MOV	P1,#04H
	LCALL 	RETARD
	MOV	P1,#00H
	LCALL 	RETARD
	SJMP 	HOLA3

RETARD:	MOV	R5,#04D;
CETI3:	MOV	R6,#0FFH;
CETI2:	MOV	R7,#0FFH;
CETI:	DJNZ	R7,CETI;
	DJNZ	R6,CETI2;
	DJNZ	R5,CETI3;
	RET

FI:	MOV	DPTR,#2000H
	MOV	R0,#30H
MAND:	MOV	R7,#25H
	MOV	A,@R0
MAN:	MOVX	@DPTR,A
	DJNZ	R7,MAN
	INC 	R0
	INC	DPTR  
	CJNE	R0,#3CH,MAND
	RET