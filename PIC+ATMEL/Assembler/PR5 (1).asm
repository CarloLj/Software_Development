START:
ELINICIO:
HOLA: JNB P3.6, HOLA
MOV A, P3
CLR A.6
CLR A.7


CJNE A, #01H, DERIZQ
SIZQDER:
	SETB P1.3
	CLR P1.2
	CLR P1.1
	CLR P1.0
	LCALL RETARDO

	CLR P1.3
	SETB P1.2
	CLR P1.1
	CLR P1.0
        LCALL RETARDO
        
	CLR P1.3
	CLR P1.2
	SETB P1.1
	CLR P1.0
        LCALL RETARDO
	
	CLR P1.3
	CLR P1.2
	CLR P1.1
	SETB P1.0
        LCALL RETARDO
	SJMP ELINICIO

DERIZQ: CJNE A, #02H, MOTORACD
SDERIZQ:
	CLR P1.3
	CLR P1.2
	CLR P1.1
	SETB P1.0
	LCALL RETARDO

	CLR P1.3
	CLR P1.2
	SETB P1.1
	CLR P1.0
        LCALL RETARDO
        
	CLR P1.3
	SETB P1.2
	CLR P1.1
	CLR P1.0
        LCALL RETARDO
	
	SETB P1.3
	CLR P1.2
	CLR P1.1
	CLR P1.0
        LCALL RETARDO
	SJMP ELINICIO

	
	RETARDO: 
	MOV R6, #0FFH
	RETAR:
	MOV R7, #05H
	RETA: DJNZ R7, RETA
	DJNZ R6, RETAR
	RET
MOTORACD:
CJNE A, #04H, FOCO 
	MOV TMOD, #01H ;Activa el timer 0 en 16 bits modo software}
	MOV P1, #00H;
	SETB P1.4
	ACALL TIEMPOPRENDIDO1
	CLR P1.4
	ACALL TIEMPOAPAGADO1
	TIEMPOPRENDIDO1:
	MOV TH0, #00111100b
	MOV TL0, #10101111b
	MOV TCON, #10H
	REPETIR21:
	JNB TF0, REPETIR21
	ADD A, #01H
	CJNE A, #28H, TIEMPOPRENDIDO1
	CLR A;
	RET
	TIEMPOAPAGADO1:
	MOV TH0, #00111100b
	MOV TL0, #10101111b
	MOV TCON, #10H
	REPETIR31:
	JNB TF0, REPETIR31
	ADD A, #01H
	CJNE A, #10110100b, TIEMPOAPAGADO1
	CLR A;
	LJMP START
FOCO: 
CJNE A, #08H, FIN
	 MOV TMOD, #01H ;Activa el timer 0 en 16 bits modo software}
	MOV P1, #00H;
	SETB P1.5
	ACALL TIEMPOPRENDIDO2
	CLR P1.5
	ACALL TIEMPOAPAGADO2
	TIEMPOPRENDIDO2:
	MOV TH0, #00111100b
	MOV TL0, #10101111b
	MOV TCON, #10H
	REPETIR22:
	JNB TF0, REPETIR22
	ADD A, #01H
	CJNE A, #28H, TIEMPOPRENDIDO2
	CLR A;
	RET
	TIEMPOAPAGADO2:
	MOV TH0, #00111100b
	MOV TL0, #10101111b
	MOV TCON, #10H
	REPETIR32:
	JNB TF0, REPETIR32
	ADD A, #01H
	CJNE A, #10110100b, TIEMPOAPAGADO2
	CLR A;
	LJMP START

FIN: LJMP ELINICIO
END
